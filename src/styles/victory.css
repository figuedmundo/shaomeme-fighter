/* Victory Screen */
@font-face {
  font-family: "BiroScript";
  src: url("/fonts/Biro_Script_reduced.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
}

.victory-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 200;
  color: white;
  font-family: sans-serif;
  overflow: hidden;
  transition: opacity 0.8s ease-in-out;
}

.victory-overlay.exiting {
  opacity: 0;
  pointer-events: none;
}

.victory-image-container {
  position: relative;
  width: 95vw;
  height: 95vh;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 20;
}

.victory-image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  transition: opacity 0.5s ease-in-out;
}

/* Cinematic Filters */
.cinematic-filter {
  filter: sepia(0.3) contrast(1.1) brightness(0.9);
}

/* Smoke Border */
.smoke-border {
  position: absolute;
  inset: -50px;
  background-image: url("/resources/smoke.png");
  background-size: 100% 100%;
  background-repeat: no-repeat;
  pointer-events: none;
  z-index: 21;
  opacity: 0.6;
}

.victory-close {
  position: absolute;
  top: 20px;
  right: 20px;
  background: transparent;
  border: none;
  color: rgba(255, 255, 255, 0.7);
  font-size: 3rem;
  cursor: pointer;
  z-index: 300;
  padding: 0;
  margin: 0;
  line-height: 1;
  text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
  transition:
    transform 0.3s,
    color 0.3s;
}

.victory-close:hover {
  color: #ffd700;
  background: transparent;
  transform: scale(1.1);
}

/* --- NEW STYLES FOR POLISH --- */

/* Background Fill */
.blurred-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: blur(20px) brightness(0.4);
  z-index: 10;
  transition: opacity 1s ease-in-out;
}

/* Polaroid Frame */
.polaroid-frame {
  position: relative;
  z-index: 20;
  background: white;
  padding: 20px 20px 80px 20px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);

  /* Sizing handled by JS now for "contain" behavior */

  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.5s ease-in-out;
  box-sizing: border-box;
}

/* Polaroid Border on Top Overlay */
.polaroid-frame::after {
  content: "";
  position: absolute;
  inset: 0;
  border: 20px solid white;
  border-bottom-width: 80px;
  pointer-events: none;
  z-index: 5;
  box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.1);
}

/* Handwritten Date */
.polaroid-date {
  position: absolute;
  bottom: 25px; /* Centered within the 80px bottom border */
  left: 0;
  width: 100%;
  text-align: center;
  color: #1a1a1a;
  font-family: "BiroScript", "Brush Script MT", "Comic Sans MS", cursive;
  font-size: 2.2rem;
  z-index: 10;
  pointer-events: none;
  transition: opacity 1s ease-in-out;
  transform: rotate(-1.5deg);
  opacity: 0.9;
}

/* Handwritten Note */
.polaroid-note {
  position: absolute;
  bottom: 60px; /* Above the date */
  left: 0;
  width: 100%;
  text-align: center;
  color: #333333;
  font-family: "BiroScript", "Brush Script MT", "Comic Sans MS", cursive;
  font-size: 1.4rem;
  z-index: 10;
  pointer-events: none;
  transition: opacity 1s ease-in-out;
  opacity: 0.8;
  padding: 0 30px;
  box-sizing: border-box;
}

/* Dynamic Classes for additional tuning if needed */
.polaroid-frame.is-portrait {
  /* Dimensions handled by JS */
}

.polaroid-frame.is-landscape {
  /* Dimensions handled by JS */
}

.polaroid-frame img {
  /* Let intrinsic size drive dimensions, constrained by parent */
  width: auto;
  height: auto;
  max-width: 100%;
  max-height: 100%;

  display: block;
  object-fit: contain;
  transition: opacity 1s ease-in-out;
  box-sizing: border-box;
}

/* Cinematic Overlay */
.cinematic-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 100;
  background:
    radial-gradient(circle, transparent 50%, black 150%),
    url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="512" height="512"%3E%3Cfilter id="noise"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noise)" opacity="0.4"/%3E%3C/svg%3E');
  mix-blend-mode: overlay;
  opacity: 0.4;
}

/* Ken Burns Animation (Gentle shake/zoom on entire frame) */
@keyframes ken-burns {
  0% {
    transform: scale(1) translate(0, 0) rotate(0deg);
  }
  25% {
    transform: scale(1.02) translate(1%, 1%) rotate(0.1deg);
  }
  50% {
    transform: scale(1.04) translate(-1%, 0%) rotate(-0.1deg);
  }
  75% {
    transform: scale(1.02) translate(0%, -1%) rotate(0.1deg);
  }
  100% {
    transform: scale(1) translate(0, 0) rotate(0deg);
  }
}

.ken-burns-active {
  animation: ken-burns 15s ease-in-out infinite alternate;
}

/* Floating Hearts */
.heart-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 150;
  overflow: hidden;
}

.floating-heart {
  position: absolute;
  width: 30px;
  height: 30px;
  background-color: #ff4d6d;
  clip-path: path(
    "M15 27.5C15 27.5 1.875 16.5 1.875 9.125C1.875 5.5 4.875 2.5 8.5 2.5C11.5 2.5 13.875 4.625 15 7.125C16.125 4.625 18.5 2.5 21.5 2.5C25.125 2.5 28.125 5.5 28.125 9.125C28.125 16.5 15 27.5 15 27.5Z"
  );
  opacity: 0;
  animation: floatUp 3s ease-out forwards;
}

@keyframes floatUp {
  0% {
    transform: translateY(0) scale(0.5);
    opacity: 0;
  }
  10% {
    opacity: 0.8;
    transform: translateY(-20px) scale(1.2);
  }
  100% {
    transform: translateY(-200px) scale(1);
    opacity: 0;
  }
}
